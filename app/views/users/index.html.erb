<div class="row wrapper border-bottom white-bg page-heading">
  <div class="col-lg-10">
    <h2>Users Listing</h2>
    <ol class="breadcrumb">
      <li>
        <%= link_to authenticated_root_path do %>
          <i class="fa fa-dashboard"></i><span>  Home</span>
        <% end %>
      </li>
      <li class="active">
        <strong>Users</strong>
      </li>
    </ol>
  </div>
</div>
<div class="col-lg-2">
</div>
<div class="wrapper wrapper-content animated fadeInRight">
  <div class="row">
    <div class="col-lg-12">
      <div class="ibox float-e-margins">
        <div class="ibox-title">
          <h5>Users Data Table</h5>
          <div class="ibox-tools">
            <a class="collapse-link">
              <i class="fa fa-chevron-up"></i>
            </a>
            <a class="dropdown-toggle" data-toggle="dropdown" href="#">
              <i class="fa fa-wrench"></i>
            </a>
            <ul class="dropdown-menu dropdown-user">
                <li>
                    <a href="#">Config option 1</a>
                </li>
                <li>
                    <a href="#">Config option 2</a>
                </li>
            </ul>
            <a class="close-link">
                <i class="fa fa-times"></i>
            </a>
          </div>
        </div>
        <div class="ibox-content">
          <table class="table table-striped table-bordered table-hover dataTables-example" id="user_table">
            <%= link_to "#userInvitationModal", data: { toggle: "modal" }, class: "btn btn-primary" do %>
              <i class="glyphicon glyphicon-plus"></i>
              New user
              <%= render "devise/invitations/new" %>
            <% end %>
            <thead>
              <tr>
                <th>Name</th>
                <th>Email</th>
                <th>Admin?</th>
                <th>Confirmed?</th>
                <th>Active?</th>
                <th colspan="3">Actions</th>
              </tr>
            </thead>
            <tbody>
              <% @users.each_with_index do |user, index| %>
                <tr>
                  <td><%= user.name %></td>
                  <td><%= user.email %></td>
                  <td><%= user.role %></td>
                  <td>
                    <% if user.confirmed? %>
                      <span class="label label-success">confirmed</span>
                    <% else %>
                      <span class="label label-warning">unconfirmed</span>
                    <% end %>
                  </td>
                  <td>
                    <% if user.deleted_at == nil %>
                      <span class="label label-primary active">Active</span>
                    <% else %>
                      <span class="label label-warning active">Archived</span>
                    <% end %>
                  </td>
                  <td>
                    <%= link_to "#userShowModal_#{index}", data: { toggle: "modal" } do %>
                      <i class="glyphicon glyphicon-user"></i>
                      <%= render partial: "show", locals: { user: user, index: index } %>
                    <% end %>
                  </td>
                  <td>
                    <%= link_to "#userEditModal_#{index}", data: { toggle: "modal" } do %>
                      <i class="glyphicon glyphicon-pencil"></i>
                      <%= render partial: "edit", locals: { user: user, index: index } %>
                    <% end %>
                  </td>
                  <td>
                    <% if user.deleted_at != nil %>
                      <%= link_to re_activate_user_path(user), data: { behavior: "confirmRestore", type: "#{user.class}" }, method: :put do %>
                        <i class="glyphicon glyphicon-ok"></i>
                      <% end %>
                    <% else %>
                      <%= link_to user_path(user), data: { behavior: "confirmDelete", type: "#{user.class}" } do %>
                        <i class="glyphicon glyphicon-remove"></i>
                      <% end %>
                    <% end %>
                  </td>
                </tr>
              <% end %>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
